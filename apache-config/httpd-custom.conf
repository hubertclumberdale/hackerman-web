# Base MIME types for non-compressed files
AddType application/wasm .wasm
AddType application/javascript .js
AddType application/octet-stream .data

# Force correct Content-Type AND Content-Encoding for compressed Unity files
# Using FilesMatch with Header set because AddType doesn't work reliably with double extensions
<FilesMatch "\.wasm\.gz$">
    Header set Content-Type "application/wasm"
    Header set Content-Encoding "gzip"
</FilesMatch>

<FilesMatch "\.js\.gz$">
    Header set Content-Type "application/javascript"
    Header set Content-Encoding "gzip"
</FilesMatch>

<FilesMatch "\.data\.gz$">
    Header set Content-Type "application/octet-stream"
    Header set Content-Encoding "gzip"
</FilesMatch>

# Prevent Apache from applying default gzip MIME type
<FilesMatch "\.gz$">
    RemoveType .gz
    AddEncoding gzip .gz
</FilesMatch>

# Allow .htaccess overrides
<Directory "/usr/local/apache2/htdocs">
    AllowOverride All
</Directory>
